"use strict";(self.webpackChunkadultery=self.webpackChunkadultery||[]).push([[941],{5941:(P,u,c)=>{c.r(u),c.d(u,{ShoppingListModule:()=>w});var h=c(6895),l=c(2431),t=c(4650),g=c(6683),L=c(182),b=c(7579),f=c(4004),v=c(3101);let m=(()=>{class o{constructor(i,e){this.authService=i,this.firestore=e,this.shopingLists=[],this.shoppingListsChanged=new b.x}getShoppingList(i){return this.shopingLists.find(n=>n.id===i)}fetchShoppingList(i){this.firestore.collection("shopping-lists",e=>e.where("id","==",i)).snapshotChanges().pipe((0,f.U)(e=>e.map(n=>({id:n.payload.doc.id,userId:n.payload.doc.data().userId,listName:n.payload.doc.data().listName,items:n.payload.doc.data().items,complete:n.payload.doc.data().complete})))).subscribe(e=>{this.shopingLists=e,this.shoppingListsChanged.next([...this.shopingLists])})}fetchShoppingLists(){const i=this.authService.userId;this.firestore.collection("shopping-lists",e=>e.where("userId","==",i)).snapshotChanges().pipe((0,f.U)(e=>e.map(n=>(n.payload.doc.data().id||this.addPayloadIdToShoppingList(n.payload.doc.id),{id:n.payload.doc.id,userId:n.payload.doc.data().userId,listName:n.payload.doc.data().listName,items:n.payload.doc.data().items,complete:n.payload.doc.data().complete})))).subscribe(e=>{this.shopingLists=e,this.shoppingListsChanged.next([...this.shopingLists])})}addNewShoppingList(i){this.firestore.collection("shopping-lists").add({...i})}updateShoppingList(i){this.firestore.collection("shopping-lists").doc(i.id).update({listName:i.listName,items:i.items,complete:i.complete}),this.shoppingListsChanged.next([...this.shopingLists])}addItemToShoppingList(i){let e=this.shopingLists.find(n=>n.id===i.shoppingListId);if(!e)throw new Error("Could not find shopping list to update");e.items||(e.items=[]),e?.items.push(i),this.updateShoppingList(e)}addPayloadIdToShoppingList(i){this.firestore.collection("shopping-lists").doc(i).update({id:i})}deleteShoppingList(i){this.firestore.collection("shopping-lists").doc(i.id).delete()}}return o.\u0275fac=function(i){return new(i||o)(t.LFG(L.e),t.LFG(v.ST))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var a=c(433);let I=(()=>{class o{constructor(i,e,n){this.activeModal=i,this.authService=e,this.shoppingListService=n}ngOnInit(){}onSubmit(i){this.shoppingListService.addNewShoppingList({id:"",userId:this.authService.userId,listName:i.value.name,complete:!1,items:null}),this.activeModal.close("Close click")}}return o.\u0275fac=function(i){return new(i||o)(t.Y36(g.Kz),t.Y36(L.e),t.Y36(m))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-add-shopping-list-modal"]],decls:13,vars:0,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],["f","ngForm"],[1,"form-group"],["type","text","name","name","id","name","ngModel","","placeholder","Enter name",1,"form-control"],["nameInput","ngModel"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary",3,"click"]],template:function(i,e){if(1&i){const n=t.EpF();t.TgZ(0,"div",0)(1,"h4",1),t._uU(2,"Name your shopping list"),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return e.activeModal.dismiss("Cross click")}),t.qZA()(),t.TgZ(4,"div",3)(5,"form",null,4)(7,"div",5),t._UZ(8,"input",6,7),t.qZA()()(),t.TgZ(10,"div",8)(11,"button",9),t.NdJ("click",function(){t.CHM(n);const d=t.MAs(6);return t.KtG(e.onSubmit(d))}),t._uU(12," Submit "),t.qZA()()}},dependencies:[a._Y,a.Fj,a.JJ,a.JL,a.On,a.F]}),o})();var y=c(3919),S=c(837);function Z(o,p){if(1&o){const i=t.EpF();t.TgZ(0,"tr")(1,"td",7)(2,"button",8),t.NdJ("click",function(){const s=t.CHM(i).$implicit,d=t.oxw();return t.KtG(d.openShoppingList(s))}),t._uU(3),t.qZA()(),t.TgZ(4,"td",7)(5,"button",9),t.NdJ("click",function(){const s=t.CHM(i).$implicit,d=t.oxw();return t.KtG(d.onDeleteShoppingList(s))}),t._uU(6," Delete "),t.qZA()()()}if(2&o){const i=p.$implicit;t.xp6(3),t.hij(" ",i.listName," ")}}let T=(()=>{class o{constructor(i,e,n){this.modalService=i,this.shoppingListService=e,this.router=n,this.contentLoaded=!1,this.shoppingLists=[]}ngOnDestroy(){this.shoppingListsSubscription.unsubscribe()}ngOnInit(){this.shoppingListsSubscription=this.shoppingListService.shoppingListsChanged.subscribe(i=>{this.shoppingLists=i,this.contentLoaded=!0}),this.shoppingListService.fetchShoppingLists()}onAddShoppingList(){this.modalService.open(I)}onDeleteShoppingList(i){const e=this.modalService.open(y.z);e.componentInstance.message=`Are you sure you want to delete the ${i.listName} shopping list?`,e.result.then(n=>{"Yes"===n&&this.shoppingListService.deleteShoppingList(i)})}openShoppingList(i){this.router.navigate([`shopping-list-page/shopping-list/${i.id}`])}}return o.\u0275fac=function(i){return new(i||o)(t.Y36(g.FF),t.Y36(m),t.Y36(l.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-shopping-list-page"]],decls:15,vars:2,consts:[[3,"contentLoaded"],["pageHeader",""],["pageContent",""],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"click"],["scope","row"],["type","button",1,"btn","btn-link",3,"click"],[1,"btn","btn-danger",3,"click"]],template:function(i,e){1&i&&(t.TgZ(0,"app-content-wrapper",0)(1,"div",1)(2,"h1"),t._uU(3,"Shopping Lists"),t.qZA()(),t.TgZ(4,"div",2)(5,"table",3)(6,"thead")(7,"tr")(8,"th",4),t._uU(9,"List Name"),t.qZA(),t._UZ(10,"th",4),t.qZA()(),t.TgZ(11,"tbody"),t.YNc(12,Z,7,1,"tr",5),t.qZA()(),t.TgZ(13,"button",6),t.NdJ("click",function(){return e.onAddShoppingList()}),t._uU(14," Add List + "),t.qZA()()()),2&i&&(t.Q6J("contentLoaded",e.contentLoaded),t.xp6(12),t.Q6J("ngForOf",e.shoppingLists))},dependencies:[h.sg,S.z],styles:['@import"https://fonts.googleapis.com/css2?family=Monoton&display=swap";@import"https://fonts.googleapis.com/css2?family=Rubik&display=swap";.logo-text[_ngcontent-%COMP%]{font-family:Monoton,cursive}p[_ngcontent-%COMP%], .body-text[_ngcontent-%COMP%]{font-family:Rubik,sans-serif}.header-and-footer-text[_ngcontent-%COMP%]{font-size:1.5em}']}),o})(),_=(()=>{class o{constructor(i,e){this.activeModal=i,this.shoppingListService=e,this.shoppingListItem={shoppingListId:"",itemName:"",estimatedPrice:2,quantityNeeded:1,department:"",purchased:!1}}ngOnInit(){this.shoppingListItemToEdit&&(this.shoppingListItem={...this.shoppingListItemToEdit}),this.shoppingListItem.shoppingListId=this.shoppingListId}onSubmit(){this.shoppingListItemToEdit?this.editItem():this.addItem(),this.activeModal.close("Close click")}editItem(){const i=this.shoppingListService.getShoppingList(this.shoppingListId);i&&i.items&&(i.items[this.indexOfItemToUpdate]=this.shoppingListItem,this.shoppingListService.updateShoppingList(i))}addItem(){this.shoppingListService.addItemToShoppingList(this.shoppingListItem)}}return o.\u0275fac=function(i){return new(i||o)(t.Y36(g.Kz),t.Y36(m))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-shopping-list-item-modal"]],inputs:{message:"message",shoppingListItemToEdit:"shoppingListItemToEdit",shoppingListId:"shoppingListId",indexOfItemToUpdate:"indexOfItemToUpdate"},decls:18,vars:5,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"check-availablility-form",3,"ngSubmit"],["f","ngForm"],[1,"form-group"],["type","text","required","","name","itemName","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","number","min","0","name","quantityNeeded",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary",3,"disabled","click"]],template:function(i,e){if(1&i&&(t.TgZ(0,"div",0)(1,"h4",1),t._uU(2),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return e.activeModal.dismiss("Cross click")}),t.qZA()(),t.TgZ(4,"div",3)(5,"form",4,5),t.NdJ("ngSubmit",function(){return e.onSubmit()}),t.TgZ(7,"div",6)(8,"label"),t._uU(9,"*Item Name"),t.qZA(),t.TgZ(10,"input",7),t.NdJ("ngModelChange",function(s){return e.shoppingListItem.itemName=s}),t.qZA()(),t.TgZ(11,"div",6)(12,"label"),t._uU(13,"Quantity Needed"),t.qZA(),t.TgZ(14,"input",8),t.NdJ("ngModelChange",function(s){return e.shoppingListItem.quantityNeeded=s}),t.qZA()()()(),t.TgZ(15,"div",9)(16,"button",10),t.NdJ("click",function(){return e.onSubmit()}),t._uU(17),t.qZA()()),2&i){const n=t.MAs(6);t.xp6(2),t.Oqu(e.message),t.xp6(8),t.Q6J("ngModel",e.shoppingListItem.itemName),t.xp6(4),t.Q6J("ngModel",e.shoppingListItem.quantityNeeded),t.xp6(2),t.Q6J("disabled",!n.valid),t.xp6(1),t.hij(" ",e.shoppingListItemToEdit?"Save":"Add item"," ")}},dependencies:[a._Y,a.Fj,a.wV,a.JJ,a.JL,a.Q7,a.qQ,a.On,a.F]}),o})();var M=c(3909),C=c(3868);function x(o,p){1&o&&(t.TgZ(0,"span"),t._uU(1,"X"),t.qZA())}const A=function(o){return{"selected-checkbox":o}},N=function(o){return{"purchased-item-name":o}};function k(o,p){if(1&o){const i=t.EpF();t.TgZ(0,"tr")(1,"td",10)(2,"span",11),t.NdJ("click",function(){const s=t.CHM(i).$implicit,d=t.oxw();return t.KtG(d.toggleCheckbox(s))}),t.YNc(3,x,2,0,"span",12),t.qZA()(),t.TgZ(4,"td",10)(5,"span",13),t._uU(6),t.qZA()(),t.TgZ(7,"td",10)(8,"span"),t._uU(9),t.qZA()(),t.TgZ(10,"td",10)(11,"fa-icon",14),t.NdJ("click",function(){const n=t.CHM(i),s=n.$implicit,d=n.index,r=t.oxw();return t.KtG(r.deleteItemFromShoppingList(s,d,r.shoppingList))}),t.qZA()(),t.TgZ(12,"td",10)(13,"fa-icon",15),t.NdJ("click",function(){const n=t.CHM(i),s=n.$implicit,d=n.index,r=t.oxw();return t.KtG(r.editShoppingListItem(s,d))}),t.qZA()()()}if(2&o){const i=p.$implicit,e=t.oxw();t.xp6(2),t.Q6J("ngClass",t.VKq(7,A,i.purchased)),t.xp6(1),t.Q6J("ngIf",i.purchased),t.xp6(2),t.Q6J("ngClass",t.VKq(9,N,i.purchased)),t.xp6(1),t.hij(" ",i.itemName," "),t.xp6(3),t.hij(" ",i.quantityNeeded," "),t.xp6(2),t.Q6J("icon",e.icon.faTrashAlt),t.xp6(2),t.Q6J("icon",e.icon.faPencilAlt)}}const J=[{path:"",component:T},{path:"shopping-list/:id",component:(()=>{class o{constructor(i,e,n,s,d){this.route=i,this.shoppingListService=e,this.modalService=n,this.icon=s,this.router=d,this.contentLoaded=!1,this.shoppingLists=[]}ngOnInit(){this.route.paramMap.subscribe(i=>{let e=String(i.get("id"));const n=this.shoppingListService.getShoppingList(e);n?(this.shoppingList=n,this.contentLoaded=!0):(this.shoppingListService.fetchShoppingList(e),this.contentLoaded=!0),this.shoppingListsSubscription=this.shoppingListService.shoppingListsChanged.subscribe(s=>{this.shoppingLists=s;let d=0;s.forEach(r=>{r.id===this.shoppingList.id&&(d=s.indexOf(r))}),this.shoppingList=s[d]})})}addShoppingListItem(){const i=this.modalService.open(_);i.componentInstance.shoppingListId=this.shoppingList.id,i.componentInstance.message=`Add new item to ${this.shoppingList.listName}`,i.result.then(e=>{})}toggleCheckbox(i){i.purchased=!i.purchased,this.changeShoppingListItem(i)}changeShoppingListItem(i){const e=this.shoppingListService.getShoppingList(i.shoppingListId);if(!e)throw new Error("Could not find a shopping list for this shopping list item.");this.shoppingListService.updateShoppingList(e)}deleteItemFromShoppingList(i,e,n){if(n.items)return n.items=n.items.filter(s=>n?.items?.indexOf(s)!==e),void this.changeShoppingListItem(i)}editShoppingListItem(i,e){const n=this.modalService.open(_);n.componentInstance.shoppingListId=this.shoppingList.id,n.componentInstance.shoppingListItemToEdit=i,n.componentInstance.indexOfItemToUpdate=e,n.componentInstance.message=`Edit ${i.itemName}`,n.result.then(s=>{})}onClickBackButton(){this.router.navigate(["shopping-list-page/"])}ngOnDestroy(){this.shoppingListsSubscription&&this.shoppingListsSubscription.unsubscribe()}}return o.\u0275fac=function(i){return new(i||o)(t.Y36(l.gz),t.Y36(m),t.Y36(g.FF),t.Y36(M.C),t.Y36(l.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-shopping-list"]],decls:23,vars:4,consts:[[3,"contentLoaded"],["pageHeader",""],[1,"btn","btn-secondary","back-button",3,"click"],[3,"icon"],[1,"small"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],["pageContent",""],[1,"btn","btn-primary",3,"click"],["scope","row"],[1,"item-checkbox",3,"ngClass","click"],[4,"ngIf"],[3,"ngClass"],[1,"delete-button",3,"icon","click"],[1,"edit-button",3,"icon","click"]],template:function(i,e){1&i&&(t.TgZ(0,"app-content-wrapper",0)(1,"div",1)(2,"button",2),t.NdJ("click",function(){return e.onClickBackButton()}),t._UZ(3,"fa-icon",3),t.TgZ(4,"span",4),t._uU(5,"Shopping lists"),t.qZA()(),t.TgZ(6,"h1"),t._uU(7),t.qZA(),t.TgZ(8,"table",5)(9,"thead")(10,"tr"),t._UZ(11,"th",6),t.TgZ(12,"th",6),t._uU(13,"Item"),t.qZA(),t.TgZ(14,"th",6),t._uU(15,"Qty."),t.qZA(),t._UZ(16,"th",6)(17,"th",6),t.qZA()(),t.TgZ(18,"tbody"),t.YNc(19,k,14,11,"tr",7),t.qZA()()(),t.TgZ(20,"div",8)(21,"button",9),t.NdJ("click",function(){return e.addShoppingListItem()}),t._uU(22," Add Item + "),t.qZA()()()),2&i&&(t.Q6J("contentLoaded",e.contentLoaded),t.xp6(3),t.Q6J("icon",e.icon.faArrowLeft),t.xp6(4),t.Oqu(e.shoppingList.listName),t.xp6(12),t.Q6J("ngForOf",e.shoppingList.items))},dependencies:[h.mk,h.sg,h.O5,C.BN,S.z],styles:[".item-checkbox[_ngcontent-%COMP%]{width:42px;height:42px;border-style:solid;border-width:1px;padding:20px;cursor:pointer;font-size:2em;display:flex;align-items:center;justify-content:center}.purchased-item-name[_ngcontent-%COMP%]{text-decoration:line-through}.delete-button[_ngcontent-%COMP%], .edit-button[_ngcontent-%COMP%]{cursor:pointer}.delete-button[_ngcontent-%COMP%]{color:red}.back-button[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:4px;align-items:center;margin-top:10px}"]}),o})()}];let F=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[l.Bz.forChild(J),l.Bz]}),o})();var O=c(4769),U=c(2767),q=c(529);let w=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[h.ez,F,C.uH,q.JF,a.u5,O.e,U.n]}),o})()}}]);
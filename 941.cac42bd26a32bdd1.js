"use strict";(self.webpackChunkadultery=self.webpackChunkadultery||[]).push([[941],{5941:(Y,m,a)=>{a.r(m),a.d(m,{ShoppingListModule:()=>w});var d=a(6895),h=a(2431),t=a(4650),l=a(6683),u=a(182),b=a(7579),L=a(4004),_=a(3101);let g=(()=>{class n{constructor(i,e){this.authService=i,this.firestore=e,this.shopingLists=[],this.shoppingListsChanged=new b.x}getShoppingList(i){return this.shopingLists.find(o=>o.id===i)}fetchShoppingList(i){this.firestore.collection("shopping-lists",e=>e.where("id","==",i)).snapshotChanges().pipe((0,L.U)(e=>e.map(o=>({id:o.payload.doc.id,userId:o.payload.doc.data().userId,listName:o.payload.doc.data().listName,items:o.payload.doc.data().items,complete:o.payload.doc.data().complete})))).subscribe(e=>{this.shopingLists=e,this.shoppingListsChanged.next([...this.shopingLists])})}fetchShoppingLists(){const i=this.authService.userId;this.firestore.collection("shopping-lists",e=>e.where("userId","==",i)).snapshotChanges().pipe((0,L.U)(e=>e.map(o=>(o.payload.doc.data().id||this.addPayloadIdToShoppingList(o.payload.doc.id),{id:o.payload.doc.id,userId:o.payload.doc.data().userId,listName:o.payload.doc.data().listName,items:o.payload.doc.data().items,complete:o.payload.doc.data().complete})))).subscribe(e=>{this.shopingLists=e,this.shoppingListsChanged.next([...this.shopingLists])})}addNewShoppingList(i){this.firestore.collection("shopping-lists").add({...i})}updateShoppingList(i){this.firestore.collection("shopping-lists").doc(i.id).update({listName:i.listName,items:i.items,complete:i.complete}),this.shoppingListsChanged.next([...this.shopingLists])}addItemToShoppingList(i){let e=this.shopingLists.find(o=>o.id===i.shoppingListId);if(!e)throw new Error("Could not find shopping list to update");e.items||(e.items=[]),e?.items.push(i),this.updateShoppingList(e)}addPayloadIdToShoppingList(i){this.firestore.collection("shopping-lists").doc(i).update({id:i})}deleteShoppingList(i){this.firestore.collection("shopping-lists").doc(i.id).delete()}}return n.\u0275fac=function(i){return new(i||n)(t.LFG(u.e),t.LFG(_.ST))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var r=a(433);let v=(()=>{class n{constructor(i,e,o){this.activeModal=i,this.authService=e,this.shoppingListService=o}ngOnInit(){}onSubmit(i){this.shoppingListService.addNewShoppingList({id:"",userId:this.authService.userId,listName:i.value.name,complete:!1,items:null}),this.activeModal.close("Close click")}}return n.\u0275fac=function(i){return new(i||n)(t.Y36(l.Kz),t.Y36(u.e),t.Y36(g))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-add-shopping-list-modal"]],decls:13,vars:0,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],["f","ngForm"],[1,"form-group"],["type","text","name","name","id","name","ngModel","","placeholder","Enter name",1,"form-control"],["nameInput","ngModel"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary",3,"click"]],template:function(i,e){if(1&i){const o=t.EpF();t.TgZ(0,"div",0)(1,"h4",1),t._uU(2,"Name your shopping list"),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return e.activeModal.dismiss("Cross click")}),t.qZA()(),t.TgZ(4,"div",3)(5,"form",null,4)(7,"div",5),t._UZ(8,"input",6,7),t.qZA()()(),t.TgZ(10,"div",8)(11,"button",9),t.NdJ("click",function(){t.CHM(o);const c=t.MAs(6);return t.KtG(e.onSubmit(c))}),t._uU(12," Submit "),t.qZA()()}},dependencies:[r._Y,r.Fj,r.JJ,r.JL,r.On,r.F]}),n})();var y=a(3919),f=a(837);function Z(n,s){if(1&n){const i=t.EpF();t.TgZ(0,"tr")(1,"td",7)(2,"button",8),t.NdJ("click",function(){const p=t.CHM(i).$implicit,c=t.oxw();return t.KtG(c.openShoppingList(p))}),t._uU(3),t.qZA()(),t.TgZ(4,"td",7)(5,"button",9),t.NdJ("click",function(){const p=t.CHM(i).$implicit,c=t.oxw();return t.KtG(c.onDeleteShoppingList(p))}),t._uU(6," Delete "),t.qZA()()()}if(2&n){const i=s.$implicit;t.xp6(3),t.hij(" ",i.listName," ")}}let I=(()=>{class n{constructor(i,e,o){this.modalService=i,this.shoppingListService=e,this.router=o,this.contentLoaded=!1,this.shoppingLists=[]}ngOnDestroy(){this.shoppingListsSubscription.unsubscribe()}ngOnInit(){this.shoppingListsSubscription=this.shoppingListService.shoppingListsChanged.subscribe(i=>{this.shoppingLists=i,this.contentLoaded=!0}),this.shoppingListService.fetchShoppingLists()}onAddShoppingList(){this.modalService.open(v)}onDeleteShoppingList(i){const e=this.modalService.open(y.z);e.componentInstance.message=`Are you sure you want to delete the ${i.listName} shopping list?`,e.result.then(o=>{"Yes"===o&&this.shoppingListService.deleteShoppingList(i)})}openShoppingList(i){this.router.navigate([`shopping-list-page/shopping-list/${i.id}`])}}return n.\u0275fac=function(i){return new(i||n)(t.Y36(l.FF),t.Y36(g),t.Y36(h.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-shopping-list-page"]],decls:15,vars:2,consts:[[3,"contentLoaded"],["pageHeader",""],["pageContent",""],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"click"],["scope","row"],["type","button",1,"btn","btn-link",3,"click"],[1,"btn","btn-danger",3,"click"]],template:function(i,e){1&i&&(t.TgZ(0,"app-content-wrapper",0)(1,"div",1)(2,"h1"),t._uU(3,"Shopping Lists"),t.qZA()(),t.TgZ(4,"div",2)(5,"table",3)(6,"thead")(7,"tr")(8,"th",4),t._uU(9,"List Name"),t.qZA(),t._UZ(10,"th",4),t.qZA()(),t.TgZ(11,"tbody"),t.YNc(12,Z,7,1,"tr",5),t.qZA()(),t.TgZ(13,"button",6),t.NdJ("click",function(){return e.onAddShoppingList()}),t._uU(14," Add List + "),t.qZA()()()),2&i&&(t.Q6J("contentLoaded",e.contentLoaded),t.xp6(12),t.Q6J("ngForOf",e.shoppingLists))},dependencies:[d.sg,f.z],styles:['@import"https://fonts.googleapis.com/css2?family=Monoton&display=swap";@import"https://fonts.googleapis.com/css2?family=Rubik&display=swap";.logo-text[_ngcontent-%COMP%]{font-family:Monoton,cursive}p[_ngcontent-%COMP%], .body-text[_ngcontent-%COMP%]{font-family:Rubik,sans-serif}.header-and-footer-text[_ngcontent-%COMP%]{font-size:1.5em}']}),n})(),M=(()=>{class n{constructor(i,e){this.activeModal=i,this.shoppingListService=e,this.shoppingListItem={shoppingListId:"",itemName:"",estimatedPrice:2,quantityNeeded:1,department:"",purchased:!1}}ngOnInit(){this.shoppingListItemToEdit&&(this.shoppingListItem=this.shoppingListItemToEdit),this.shoppingListItem.shoppingListId=this.shoppingListId}onSubmit(){this.shoppingListService.addItemToShoppingList(this.shoppingListItem),this.activeModal.close("Close click")}}return n.\u0275fac=function(i){return new(i||n)(t.Y36(l.Kz),t.Y36(g))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-shopping-list-item-modal"]],inputs:{message:"message",shoppingListItemToEdit:"shoppingListItemToEdit",shoppingListId:"shoppingListId"},decls:18,vars:4,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"check-availablility-form",3,"ngSubmit"],["f","ngForm"],[1,"form-group"],["type","text","required","","name","itemName","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","number","min","0","name","quantityNeeded",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary",3,"disabled","click"]],template:function(i,e){if(1&i&&(t.TgZ(0,"div",0)(1,"h4",1),t._uU(2),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return e.activeModal.dismiss("Cross click")}),t.qZA()(),t.TgZ(4,"div",3)(5,"form",4,5),t.NdJ("ngSubmit",function(){return e.onSubmit()}),t.TgZ(7,"div",6)(8,"label"),t._uU(9,"*Item Name"),t.qZA(),t.TgZ(10,"input",7),t.NdJ("ngModelChange",function(p){return e.shoppingListItem.itemName=p}),t.qZA()(),t.TgZ(11,"div",6)(12,"label"),t._uU(13,"Quantity Needed"),t.qZA(),t.TgZ(14,"input",8),t.NdJ("ngModelChange",function(p){return e.shoppingListItem.quantityNeeded=p}),t.qZA()()()(),t.TgZ(15,"div",9)(16,"button",10),t.NdJ("click",function(){return e.onSubmit()}),t._uU(17," Add item "),t.qZA()()),2&i){const o=t.MAs(6);t.xp6(2),t.Oqu(e.message),t.xp6(8),t.Q6J("ngModel",e.shoppingListItem.itemName),t.xp6(4),t.Q6J("ngModel",e.shoppingListItem.quantityNeeded),t.xp6(2),t.Q6J("disabled",!o.valid)}},dependencies:[r._Y,r.Fj,r.wV,r.JJ,r.JL,r.Q7,r.qQ,r.On,r.F]}),n})();var T=a(3909),S=a(3868);function A(n,s){1&n&&(t.TgZ(0,"span"),t._uU(1,"X"),t.qZA())}const N=function(n){return{"selected-checkbox":n}},x=function(n){return{"purchased-item-name":n}};function J(n,s){if(1&n){const i=t.EpF();t.TgZ(0,"tr")(1,"td",7)(2,"span",8),t.NdJ("click",function(){const p=t.CHM(i).$implicit,c=t.oxw();return t.KtG(c.toggleCheckbox(p))}),t.YNc(3,A,2,0,"span",9),t.qZA()(),t.TgZ(4,"td",7)(5,"span",10),t._uU(6),t.qZA()(),t.TgZ(7,"td",7)(8,"span"),t._uU(9),t.qZA()(),t.TgZ(10,"td",7)(11,"fa-icon",11),t.NdJ("click",function(){const o=t.CHM(i),p=o.$implicit,c=o.index,C=t.oxw();return t.KtG(C.deleteItemFromShoppingList(p,c,C.shoppingList))}),t.qZA()()()}if(2&n){const i=s.$implicit,e=t.oxw();t.xp6(2),t.Q6J("ngClass",t.VKq(6,N,i.purchased)),t.xp6(1),t.Q6J("ngIf",i.purchased),t.xp6(2),t.Q6J("ngClass",t.VKq(8,x,i.purchased)),t.xp6(1),t.hij(" ",i.itemName," "),t.xp6(3),t.hij(" ",i.quantityNeeded," "),t.xp6(2),t.Q6J("icon",e.icon.faTrashAlt)}}const k=[{path:"",component:I},{path:"shopping-list/:id",component:(()=>{class n{constructor(i,e,o,p){this.route=i,this.shoppingListService=e,this.modalService=o,this.icon=p,this.contentLoaded=!1,this.shoppingLists=[]}ngOnInit(){this.route.paramMap.subscribe(i=>{let e=String(i.get("id"));const o=this.shoppingListService.getShoppingList(e);o?(this.shoppingList=o,this.contentLoaded=!0):(this.shoppingListsSubscription=this.shoppingListService.shoppingListsChanged.subscribe(p=>{this.shoppingLists=p,this.contentLoaded=!0}),this.shoppingListService.fetchShoppingList(e))})}addShoppingListItem(){const i=this.modalService.open(M);i.componentInstance.shoppingListId=this.shoppingList.id,i.componentInstance.message=`Add new item to ${this.shoppingList.listName}`,i.result.then(e=>{})}toggleCheckbox(i){i.purchased=!i.purchased,this.changeShoppingListItem(i)}changeShoppingListItem(i){const e=this.shoppingListService.getShoppingList(i.shoppingListId);if(!e)throw new Error("Could not find a shopping list for this shopping list item.");this.shoppingListService.updateShoppingList(e)}deleteItemFromShoppingList(i,e,o){if(o.items)return o.items=o.items.filter(p=>o?.items?.indexOf(p)!==e),void this.changeShoppingListItem(i)}ngOnDestroy(){this.shoppingListsSubscription&&this.shoppingListsSubscription.unsubscribe()}}return n.\u0275fac=function(i){return new(i||n)(t.Y36(h.gz),t.Y36(g),t.Y36(l.FF),t.Y36(T.C))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-shopping-list"]],decls:18,vars:3,consts:[[3,"contentLoaded"],["pageHeader",""],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],["pageContent",""],[1,"btn","btn-primary",3,"click"],["scope","row"],[1,"item-checkbox",3,"ngClass","click"],[4,"ngIf"],[3,"ngClass"],[1,"delete-button",3,"icon","click"]],template:function(i,e){1&i&&(t.TgZ(0,"app-content-wrapper",0)(1,"div",1)(2,"h1"),t._uU(3),t.qZA(),t.TgZ(4,"table",2)(5,"thead")(6,"tr"),t._UZ(7,"th",3),t.TgZ(8,"th",3),t._uU(9,"Item"),t.qZA(),t.TgZ(10,"th",3),t._uU(11,"Qty."),t.qZA(),t._UZ(12,"th",3),t.qZA()(),t.TgZ(13,"tbody"),t.YNc(14,J,12,10,"tr",4),t.qZA()()(),t.TgZ(15,"div",5)(16,"button",6),t.NdJ("click",function(){return e.addShoppingListItem()}),t._uU(17," Add Item + "),t.qZA()()()),2&i&&(t.Q6J("contentLoaded",e.contentLoaded),t.xp6(3),t.Oqu(e.shoppingList.listName),t.xp6(11),t.Q6J("ngForOf",e.shoppingList.items))},dependencies:[d.mk,d.sg,d.O5,S.BN,f.z],styles:[".item-checkbox[_ngcontent-%COMP%]{width:42px;height:42px;border-style:solid;border-width:1px;padding:20px;cursor:pointer;font-size:2em;display:flex;align-items:center;justify-content:center}.purchased-item-name[_ngcontent-%COMP%]{text-decoration:line-through}.delete-button[_ngcontent-%COMP%]{color:red;cursor:pointer}"]}),n})()}];let F=(()=>{class n{}return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[h.Bz.forChild(k),h.Bz]}),n})();var q=a(4769),O=a(2767),U=a(529);let w=(()=>{class n{}return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[d.ez,F,S.uH,U.JF,r.u5,q.e,O.n]}),n})()}}]);
"use strict";(self.webpackChunkadultery=self.webpackChunkadultery||[]).push([[941],{5941:(O,m,p)=>{p.r(m),p.d(m,{ShoppingListModule:()=>k});var g=p(6895),h=p(2431),t=p(4650),r=p(6683),u=p(182),S=p(7579),L=p(4004),v=p(3101);let c=(()=>{class n{constructor(i,e){this.authService=i,this.firestore=e,this.shopingLists=[],this.shoppingListsChanged=new S.x}getShoppingList(i){return this.shopingLists.find(o=>o.id===i)}fetchShoppingList(i){this.firestore.collection("shopping-lists",e=>e.where("id","==",i)).snapshotChanges().pipe((0,L.U)(e=>e.map(o=>({id:o.payload.doc.id,userId:o.payload.doc.data().userId,listName:o.payload.doc.data().listName,items:o.payload.doc.data().items,complete:o.payload.doc.data().complete})))).subscribe(e=>{this.shopingLists=e,this.shoppingListsChanged.next([...this.shopingLists])})}fetchShoppingLists(){const i=this.authService.userId;this.firestore.collection("shopping-lists",e=>e.where("userId","==",i)).snapshotChanges().pipe((0,L.U)(e=>e.map(o=>(o.payload.doc.data().id||this.addPayloadIdToShoppingList(o.payload.doc.id),{id:o.payload.doc.id,userId:o.payload.doc.data().userId,listName:o.payload.doc.data().listName,items:o.payload.doc.data().items,complete:o.payload.doc.data().complete})))).subscribe(e=>{this.shopingLists=e,this.shoppingListsChanged.next([...this.shopingLists])})}addNewShoppingList(i){this.firestore.collection("shopping-lists").add({...i})}updateShoppingList(i){console.log(i),this.firestore.collection("shopping-lists").doc(i.id).update({listName:i.listName,items:i.items,complete:i.complete})}addItemToShoppingList(i){let e=this.shopingLists.find(o=>o.id===i.shoppingListId);if(!e)throw new Error("Could not find shopping list to update");e.items||(e.items=[]),e?.items.push(i),this.updateShoppingList(e)}addPayloadIdToShoppingList(i){this.firestore.collection("shopping-lists").doc(i).update({id:i})}deleteShoppingList(i){this.firestore.collection("shopping-lists").doc(i.id).delete()}}return n.\u0275fac=function(i){return new(i||n)(t.LFG(u.e),t.LFG(v.ST))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var a=p(433);let b=(()=>{class n{constructor(i,e,o){this.activeModal=i,this.authService=e,this.shoppingListService=o}ngOnInit(){}onSubmit(i){this.shoppingListService.addNewShoppingList({id:"",userId:this.authService.userId,listName:i.value.name,complete:!1,items:null}),this.activeModal.close("Close click")}}return n.\u0275fac=function(i){return new(i||n)(t.Y36(r.Kz),t.Y36(u.e),t.Y36(c))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-add-shopping-list-modal"]],decls:13,vars:0,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],["f","ngForm"],[1,"form-group"],["type","text","name","name","id","name","ngModel","","placeholder","Enter name",1,"form-control"],["nameInput","ngModel"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary",3,"click"]],template:function(i,e){if(1&i){const o=t.EpF();t.TgZ(0,"div",0)(1,"h4",1),t._uU(2,"Name your shopping list"),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return e.activeModal.dismiss("Cross click")}),t.qZA()(),t.TgZ(4,"div",3)(5,"form",null,4)(7,"div",5),t._UZ(8,"input",6,7),t.qZA()()(),t.TgZ(10,"div",8)(11,"button",9),t.NdJ("click",function(){t.CHM(o);const l=t.MAs(6);return t.KtG(e.onSubmit(l))}),t._uU(12," Submit "),t.qZA()()}},dependencies:[a._Y,a.Fj,a.JJ,a.JL,a.On,a.F]}),n})();var C=p(3919),f=p(837);function y(n,s){if(1&n){const i=t.EpF();t.TgZ(0,"tr")(1,"td",7)(2,"button",8),t.NdJ("click",function(){const d=t.CHM(i).$implicit,l=t.oxw();return t.KtG(l.openShoppingList(d))}),t._uU(3),t.qZA()(),t.TgZ(4,"td",7)(5,"button",9),t.NdJ("click",function(){const d=t.CHM(i).$implicit,l=t.oxw();return t.KtG(l.onDeleteShoppingList(d))}),t._uU(6," Delete "),t.qZA()()()}if(2&n){const i=s.$implicit;t.xp6(3),t.hij(" ",i.listName," ")}}let I=(()=>{class n{constructor(i,e,o){this.modalService=i,this.shoppingListService=e,this.router=o,this.contentLoaded=!1,this.shoppingLists=[]}ngOnDestroy(){this.shoppingListsSubscription.unsubscribe()}ngOnInit(){this.shoppingListsSubscription=this.shoppingListService.shoppingListsChanged.subscribe(i=>{this.shoppingLists=i,this.contentLoaded=!0}),this.shoppingListService.fetchShoppingLists()}onAddShoppingList(){this.modalService.open(b)}onDeleteShoppingList(i){const e=this.modalService.open(C.z);e.componentInstance.message=`Are you sure you want to delete the ${i.listName} shopping list?`,e.result.then(o=>{"Yes"===o&&this.shoppingListService.deleteShoppingList(i)})}openShoppingList(i){this.router.navigate([`shopping-list-page/shopping-list/${i.id}`])}}return n.\u0275fac=function(i){return new(i||n)(t.Y36(r.FF),t.Y36(c),t.Y36(h.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-shopping-list-page"]],decls:15,vars:2,consts:[[3,"contentLoaded"],["pageHeader",""],["pageContent",""],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"click"],["scope","row"],["type","button",1,"btn","btn-link",3,"click"],[1,"btn","btn-danger",3,"click"]],template:function(i,e){1&i&&(t.TgZ(0,"app-content-wrapper",0)(1,"div",1)(2,"h1"),t._uU(3,"Shopping Lists"),t.qZA()(),t.TgZ(4,"div",2)(5,"table",3)(6,"thead")(7,"tr")(8,"th",4),t._uU(9,"List Name"),t.qZA(),t._UZ(10,"th",4),t.qZA()(),t.TgZ(11,"tbody"),t.YNc(12,y,7,1,"tr",5),t.qZA()(),t.TgZ(13,"button",6),t.NdJ("click",function(){return e.onAddShoppingList()}),t._uU(14," Add List + "),t.qZA()()()),2&i&&(t.Q6J("contentLoaded",e.contentLoaded),t.xp6(12),t.Q6J("ngForOf",e.shoppingLists))},dependencies:[g.sg,f.z],styles:['@import"https://fonts.googleapis.com/css2?family=Monoton&display=swap";@import"https://fonts.googleapis.com/css2?family=Rubik&display=swap";.logo-text[_ngcontent-%COMP%]{font-family:Monoton,cursive}p[_ngcontent-%COMP%], .body-text[_ngcontent-%COMP%]{font-family:Rubik,sans-serif}.header-and-footer-text[_ngcontent-%COMP%]{font-size:1.5em}']}),n})(),M=(()=>{class n{constructor(i,e){this.activeModal=i,this.shoppingListService=e,this.shoppingListItem={shoppingListId:"",itemName:"",estimatedPrice:2,quantityNeeded:void 0,department:"",purchased:!1}}ngOnInit(){this.shoppingListItemToEdit&&(this.shoppingListItem=this.shoppingListItemToEdit),this.shoppingListItem.shoppingListId=this.shoppingListId}onSubmit(){this.shoppingListService.addItemToShoppingList(this.shoppingListItem),this.activeModal.close("Close click")}}return n.\u0275fac=function(i){return new(i||n)(t.Y36(r.Kz),t.Y36(c))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-shopping-list-item-modal"]],inputs:{message:"message",shoppingListItemToEdit:"shoppingListItemToEdit",shoppingListId:"shoppingListId"},decls:18,vars:4,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"check-availablility-form",3,"ngSubmit"],["f","ngForm"],[1,"form-group"],["type","text","required","","name","itemName","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","number","min","0","name","quantityNeeded",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary",3,"disabled","click"]],template:function(i,e){if(1&i&&(t.TgZ(0,"div",0)(1,"h4",1),t._uU(2),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return e.activeModal.dismiss("Cross click")}),t.qZA()(),t.TgZ(4,"div",3)(5,"form",4,5),t.NdJ("ngSubmit",function(){return e.onSubmit()}),t.TgZ(7,"div",6)(8,"label"),t._uU(9,"*Item Name"),t.qZA(),t.TgZ(10,"input",7),t.NdJ("ngModelChange",function(d){return e.shoppingListItem.itemName=d}),t.qZA()(),t.TgZ(11,"div",6)(12,"label"),t._uU(13,"Quantity Needed"),t.qZA(),t.TgZ(14,"input",8),t.NdJ("ngModelChange",function(d){return e.shoppingListItem.quantityNeeded=d}),t.qZA()()()(),t.TgZ(15,"div",9)(16,"button",10),t.NdJ("click",function(){return e.onSubmit()}),t._uU(17," Add item "),t.qZA()()),2&i){const o=t.MAs(6);t.xp6(2),t.Oqu(e.message),t.xp6(8),t.Q6J("ngModel",e.shoppingListItem.itemName),t.xp6(4),t.Q6J("ngModel",e.shoppingListItem.quantityNeeded),t.xp6(2),t.Q6J("disabled",!o.valid)}},dependencies:[a._Y,a.Fj,a.wV,a.JJ,a.JL,a.Q7,a.qQ,a.On,a.F]}),n})();function Z(n,s){if(1&n&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&n){const i=s.$implicit;t.xp6(1),t.hij(" ",i.itemName," ")}}const T=[{path:"",component:I},{path:"shopping-list/:id",component:(()=>{class n{constructor(i,e,o){this.route=i,this.shoppingListService=e,this.modalService=o,this.contentLoaded=!1,this.shoppingLists=[]}ngOnInit(){this.route.paramMap.subscribe(i=>{let e=String(i.get("id"));const o=this.shoppingListService.getShoppingList(e);o?(this.shoppingList=o,this.contentLoaded=!0):(this.shoppingListsSubscription=this.shoppingListService.shoppingListsChanged.subscribe(d=>{this.shoppingLists=d,this.contentLoaded=!0}),this.shoppingListService.fetchShoppingList(e))})}addShoppingListItem(){const i=this.modalService.open(M);i.componentInstance.shoppingListId=this.shoppingList.id,i.componentInstance.message=`Add new item to ${this.shoppingList.listName}`,i.result.then(e=>{})}ngOnDestroy(){this.shoppingListsSubscription&&this.shoppingListsSubscription.unsubscribe()}}return n.\u0275fac=function(i){return new(i||n)(t.Y36(h.gz),t.Y36(c),t.Y36(r.FF))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-shopping-list"]],decls:9,vars:3,consts:[[3,"contentLoaded"],["pageHeader",""],[4,"ngFor","ngForOf"],["pageContent",""],[1,"btn","btn-primary",3,"click"]],template:function(i,e){1&i&&(t.TgZ(0,"app-content-wrapper",0)(1,"div",1)(2,"h1"),t._uU(3),t.qZA(),t.TgZ(4,"ul"),t.YNc(5,Z,2,1,"li",2),t.qZA()(),t.TgZ(6,"div",3)(7,"button",4),t.NdJ("click",function(){return e.addShoppingListItem()}),t._uU(8," Add Item + "),t.qZA()()()),2&i&&(t.Q6J("contentLoaded",e.contentLoaded),t.xp6(3),t.Oqu(e.shoppingList.listName),t.xp6(2),t.Q6J("ngForOf",e.shoppingList.items))},dependencies:[g.sg,f.z]}),n})()}];let _=(()=>{class n{}return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[h.Bz.forChild(T),h.Bz]}),n})();var N=p(4769),A=p(2767),F=p(3868),J=p(529);let k=(()=>{class n{}return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[g.ez,_,F.uH,J.JF,a.u5,N.e,A.n]}),n})()}}]);